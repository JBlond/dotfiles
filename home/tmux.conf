# enable mouse
set -g mouse on

# ------ key bindings ---------------------------
bind -T root F1 new-window
bind -T root F2 next-window
bind -T root F3 previous-window
bind -T root F4 kill-window
bind -T root F5 source-file ~/.tmux.conf \; display 'Reloaded tmux config.'
bind -T root F6 set status

# Sane pane splitting with Prefix + | and Prefix + -. 
# The default ones are % and ", which is highly non-intuitive:
# Pane splitting.
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Toggle pane synchronization with Prefix + S:
bind S set synchronize-panes

# F11 = toogle mouse on and off
bind -T root F11 run "\
    tmux show-options -g | grep -q "mouse\\s*on"; \
    if [ \$? = 0 ]; \
    then  \
        toggle=off;  \
    else  \
        toggle=on;  \
    fi;  \
    tmux set-option -w mouse \$toggle; \
    tmux set-option -g mouse \$toggle; \
    "

# for status line
wg_is_mouse_off="#([ $(tmux show-option -gv mouse) = 'off' ] && echo 'üñ∞ ')"

# allow F12 to burn off/on CRTL+B
bind -T root F12  \
    set prefix None \;\
    set key-table off \;\
    set status-style "fg=colour245, bg=colour238" \;\
    if -F '#{pane_in_mode}' 'send-keys -X cancel' \;\
    refresh-client -S \;\

bind -T off F12 \
    set -u prefix \;\
    set -u key-table \;\
    set -u status-style \;\
    set -u window-status-current-style \;\
    set -u window-status-current-format \;\
    refresh-client -S

# for status line
wg_is_keys_off="#([ $(tmux show-option -qv key-table) = 'off' ] && echo 'OFF ')"

# ------ windows settings ---------------------------
# rename-window
set -wg allow-rename off
set -wg automatic-rename off

# Automatically re-number windows after one of them is closed.
set -g renumber-windows on

# ------ status theme -------------------------------

# always use 256 colors
set -g default-terminal screen-256color
set -g terminal-overrides ',screen-256color:Tc'

# define some colors
COLOR_STATUS_FOREGROUND=colour255
COLOR_STATUS_BACKGROUND=colour238

# message colors
set -g message-style "bg=#00346e, fg=#ffffd7"  # tomorrow night blue, base3
# display for 2 seconds
set-option -g display-time 2000

set-option -g status-fg $COLOR_STATUS_FOREGROUND
set-option -g status-bg default
set-option -g status-attr default

# left 
set -g status-left "#[fg=black,bg=colour214] ‚ùê #S #[bg=default] #[fg=black,bg=colour214][#I:#P]#[bg=default] "
set -g status-left-length 400

# right
php_version="PHP #(php --version | grep -m1 PHP | sed -e 's/ (cli).*//g' | sed 's/PHP //' | cut -c-6 ) "
set -g status-right "#{?client_prefix, ‚å® , } #[fg=black,bg=colour214] $wg_is_mouse_off$wg_is_keys_off$php_version#(whoami)@#h #[fg=brightwhite, bg=colour238] %Y-%m-%d %H:%M "
set -g status-right-length 600

set -wg window-status-separator " "

# last used window name
set -wg window-status-last-style "fg=white"

# default inactive window
set-window-option -g window-status-format '#[fg=colour214,bg=colour235] #I #[fg=white,bg=colour236] #W #[default]'

# current window
set-window-option -g window-status-current-attr none
set-window-option -g window-status-current-format '#[fg=black,bg=colour214] #I #[fg=brightwhite,bg=colour238] #W #[default]'


# panes
set -wg pane-active-border-style "bg=default, fg=blue"
set -wg pane-border-style "fg=#585858" # base01
set-option -g display-panes-active-colour colour148
set-option -g pane-active-border-fg colour255

# clock color
set-window-option -g clock-mode-colour colour160

# Start window and pane indices at 1.
set -g base-index 1
set -g pane-base-index 1

# See if this fixes slow ESC issues.
# http://unix.stackexchange.com/questions/23138/esc-key-causes-a-small-delay-in-terminal-due-to-its-alt-behavior
set -s escape-time 0

# reload config file (change file location to your the tmux.conf you want to use)
bind r source-file ~/.tmux.conf \; display 'Reloaded tmux config.'

# set position to top
set-option -g status-position top

# enter copy mode. Then CTRL + SPACE for selection. CTRL + w to put the selection into the buffer
bind C-c copy-mode
bind C-v paste-buffer

# have command prompt not only on :
bind . command-prompt

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'JBlond/tmux-resurrect'
run '~/.tmux/plugins/tpm/tpm'
